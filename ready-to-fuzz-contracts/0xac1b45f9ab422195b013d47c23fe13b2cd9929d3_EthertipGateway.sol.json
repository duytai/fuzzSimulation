{"name":"EthertipGateway","address":"0xac1b45f9ab422195b013d47c23fe13b2cd9929d3","source":"pragma solidity ^0.4.24;\n\ncontract EthertipGateway {\n\n    event Withdraw(address indexed owner, uint value);\n    event Deposit(address indexed from, uint value);   \n\n    mapping(uint=>uint) public used;\n    address public validator;\n\n    uint public tipToEther = 0.0001 ether;\n\n    constructor (address _validator) public {\n        validator = _validator;\n    }    \n\n    function () public payable {\n        emit Deposit(msg.sender, msg.value);\n    }\n\n    function withdraw(uint _id, uint _value, bytes _sig) public {\n        bytes32 dataHash = keccak256(validator, _id, _value);\n        bytes32 prefixedHash = keccak256(\"\\x19Ethereum Signed Message:\\n32\", dataHash);\n        address recovered = getRecoveredAddress(_sig, prefixedHash);\n        require(validator == recovered);\n        require(used[_id] < _value);\n        \n        uint _transfer = (_value - used[_id]) * tipToEther;\n        \n        used[_id] = _value;\n        msg.sender.transfer(_transfer);\n        emit Withdraw(msg.sender, _transfer);\n    }\n\n    function getRecoveredAddress(bytes sig, bytes32 dataHash)\n        internal\n        pure\n        returns (address addr)\n    {\n        bytes32 ra;\n        bytes32 sa;\n        uint8 va;\n\n        // Check the signature length\n        if (sig.length != 65) {\n          return (0);\n        }\n\n        // Divide the signature in r, s and v variables\n        assembly {\n          ra := mload(add(sig, 32))\n          sa := mload(add(sig, 64))\n          va := byte(0, mload(add(sig, 96)))\n        }\n\n        if (va < 27) {\n          va += 27;\n        }\n\n        address recoveredAddress = ecrecover(dataHash, va, ra, sa);\n\n        return (recoveredAddress);\n    }     \n\n}","contract":{"abi":"[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"used\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tipToEther\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"validator\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_id\",\"type\":\"uint256\"},{\"name\":\"_value\",\"type\":\"uint256\"},{\"name\":\"_sig\",\"type\":\"bytes\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_validator\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Withdraw\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Deposit\",\"type\":\"event\"}]","bin":"6080604052655af3107a400060025534801561001a57600080fd5b506040516020806105f38339810180604052810190808051906020019092919050505080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550506105658061008e6000396000f300608060405260043610610062576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063020fe6e5146100b257806327acbc20146100f35780633a5381b51461011e578063744fb6ca14610175575b3373ffffffffffffffffffffffffffffffffffffffff167fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c346040518082815260200191505060405180910390a2005b3480156100be57600080fd5b506100dd600480360381019080803590602001909291905050506101f2565b6040518082815260200191505060405180910390f35b3480156100ff57600080fd5b5061010861020a565b6040518082815260200191505060405180910390f35b34801561012a57600080fd5b50610133610210565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561018157600080fd5b506101f06004803603810190808035906020019092919080359060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610236565b005b60006020528060005260406000206000915090505481565b60025481565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168787604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014018381526020018281526020019350505050604051809103902093508360405180807f19457468657265756d205369676e6564204d6573736167653a0a333200000000815250601c018260001916600019168152602001915050604051809103902092506103138584610461565b91508173ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561037157600080fd5b856000808981526020019081526020016000205410151561039157600080fd5b60025460008089815260200190815260200160002054870302905085600080898152602001908152602001600020819055503373ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015610409573d6000803e3d6000fd5b503373ffffffffffffffffffffffffffffffffffffffff167f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a9424364826040518082815260200191505060405180910390a250505050505050565b60008060008060006041875114151561047d576000945061052f565b6020870151935060408701519250606087015160001a9150601b8260ff1610156104a857601b820191505b600186838686604051600081526020016040526040518085600019166000191681526020018460ff1660ff1681526020018360001916600019168152602001826000191660001916815260200194505050505060206040516020810390808403906000865af115801561051f573d6000803e3d6000fd5b5050506020604051035190508094505b50505050929150505600a165627a7a723058203b9b94706068ceccf03f5b1775ba2b1c4b2bc06164585a1140766c89751c6c4e0029","bin-runtime":"608060405260043610610062576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063020fe6e5146100b257806327acbc20146100f35780633a5381b51461011e578063744fb6ca14610175575b3373ffffffffffffffffffffffffffffffffffffffff167fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c346040518082815260200191505060405180910390a2005b3480156100be57600080fd5b506100dd600480360381019080803590602001909291905050506101f2565b6040518082815260200191505060405180910390f35b3480156100ff57600080fd5b5061010861020a565b6040518082815260200191505060405180910390f35b34801561012a57600080fd5b50610133610210565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561018157600080fd5b506101f06004803603810190808035906020019092919080359060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610236565b005b60006020528060005260406000206000915090505481565b60025481565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168787604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014018381526020018281526020019350505050604051809103902093508360405180807f19457468657265756d205369676e6564204d6573736167653a0a333200000000815250601c018260001916600019168152602001915050604051809103902092506103138584610461565b91508173ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561037157600080fd5b856000808981526020019081526020016000205410151561039157600080fd5b60025460008089815260200190815260200160002054870302905085600080898152602001908152602001600020819055503373ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015610409573d6000803e3d6000fd5b503373ffffffffffffffffffffffffffffffffffffffff167f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a9424364826040518082815260200191505060405180910390a250505050505050565b60008060008060006041875114151561047d576000945061052f565b6020870151935060408701519250606087015160001a9150601b8260ff1610156104a857601b820191505b600186838686604051600081526020016040526040518085600019166000191681526020018460ff1660ff1681526020018360001916600019168152602001826000191660001916815260200194505050505060206040516020810390808403906000865af115801561051f573d6000803e3d6000fd5b5050506020604051035190508094505b50505050929150505600a165627a7a723058203b9b94706068ceccf03f5b1775ba2b1c4b2bc06164585a1140766c89751c6c4e0029","srcmap":"26:1653:0:-;;;263:12;238:37;;282:79;8:9:-1;5:2;;;30:1;27;20:12;5:2;282:79:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;344:10;332:9;;:22;;;;;;;;;;;;;;;;;;282:79;26:1653;;;;;;","srcmap-runtime":"26:1653:0:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;421:10;413:30;;;433:9;413:30;;;;;;;;;;;;;;;;;;26:1653;170:31;;8:9:-1;5:2;;;30:1;27;20:12;5:2;170:31:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;238:37;;8:9:-1;5:2;;;30:1;27;20:12;5:2;238:37:0;;;;;;;;;;;;;;;;;;;;;;;207:24;;8:9:-1;5:2;;;30:1;27;20:12;5:2;207:24:0;;;;;;;;;;;;;;;;;;;;;;;;;;;456:556;;8:9:-1;5:2;;;30:1;27;20:12;5:2;456:556:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;170:31;;;;;;;;;;;;;;;;;:::o;238:37::-;;;;:::o;207:24::-;;;;;;;;;;;;;:::o;456:556::-;526:16;588:20;676:17;832:14;555:9;;;;;;;;;;;566:3;571:6;545:33;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;526:52;;657:8;611:55;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;588:78;;696:39;716:4;722:12;696:19;:39::i;:::-;676:59;;766:9;753:22;;:9;;;;;;;;;;;:22;;;745:31;;;;;;;;806:6;794:4;:9;799:3;794:9;;;;;;;;;;;;:18;786:27;;;;;;;;872:10;;859:4;:9;864:3;859:9;;;;;;;;;;;;850:6;:18;849:33;832:50;;913:6;901:4;:9;906:3;901:9;;;;;;;;;;;:18;;;;929:10;:19;;:30;949:9;929:30;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;929:30:0;983:10;974:31;;;995:9;974:31;;;;;;;;;;;;;;;;;;456:556;;;;;;;:::o;1018:653::-;1123:12;1151:10;1171;1191:8;1570:24;1266:2;1252:3;:10;:16;;1248:55;;;1290:1;1282:10;;;;1248:55;1411:2;1406:3;1402:12;1396:19;1390:25;;1447:2;1442:3;1438:12;1432:19;1426:25;;1491:2;1486:3;1482:12;1476:19;1473:1;1468:28;1462:34;;1525:2;1520;:7;;;1516:44;;;1547:2;1541:8;;;;1516:44;1597:31;1607:8;1617:2;1621;1625;1597:31;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;1597:31:0;;;;;;;;1570:58;;1647:16;1639:25;;1018:653;;;;;;;;;:::o"},"ast":{"attributes":{"absolutePath":"/home/worm/Etherscan/downloader/tmp/0xac1b45f9ab422195b013d47c23fe13b2cd9929d3_EthertipGateway.sol","exportedSymbols":{"EthertipGateway":[171]}},"children":[{"attributes":{"literals":["solidity","^","0.4",".24"]},"id":1,"name":"PragmaDirective","src":"0:24:0"},{"attributes":{"baseContracts":[null],"contractDependencies":[null],"contractKind":"contract","documentation":null,"fullyImplemented":true,"linearizedBaseContracts":[171],"name":"EthertipGateway","scope":172},"children":[{"attributes":{"anonymous":false,"documentation":null,"name":"Withdraw"},"children":[{"children":[{"attributes":{"constant":false,"indexed":true,"name":"owner","scope":7,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":2,"name":"ElementaryTypeName","src":"73:7:0"}],"id":3,"name":"VariableDeclaration","src":"73:21:0"},{"attributes":{"constant":false,"indexed":false,"name":"value","scope":7,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":4,"name":"ElementaryTypeName","src":"96:4:0"}],"id":5,"name":"VariableDeclaration","src":"96:10:0"}],"id":6,"name":"ParameterList","src":"72:35:0"}],"id":7,"name":"EventDefinition","src":"58:50:0"},{"attributes":{"anonymous":false,"documentation":null,"name":"Deposit"},"children":[{"children":[{"attributes":{"constant":false,"indexed":true,"name":"from","scope":13,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":8,"name":"ElementaryTypeName","src":"127:7:0"}],"id":9,"name":"VariableDeclaration","src":"127:20:0"},{"attributes":{"constant":false,"indexed":false,"name":"value","scope":13,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":10,"name":"ElementaryTypeName","src":"149:4:0"}],"id":11,"name":"VariableDeclaration","src":"149:10:0"}],"id":12,"name":"ParameterList","src":"126:34:0"}],"id":13,"name":"EventDefinition","src":"113:48:0"},{"attributes":{"constant":false,"name":"used","scope":171,"stateVariable":true,"storageLocation":"default","type":"mapping(uint256 => uint256)","value":null,"visibility":"public"},"children":[{"attributes":{"type":"mapping(uint256 => uint256)"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":14,"name":"ElementaryTypeName","src":"178:4:0"},{"attributes":{"name":"uint","type":"uint256"},"id":15,"name":"ElementaryTypeName","src":"184:4:0"}],"id":16,"name":"Mapping","src":"170:19:0"}],"id":17,"name":"VariableDeclaration","src":"170:31:0"},{"attributes":{"constant":false,"name":"validator","scope":171,"stateVariable":true,"storageLocation":"default","type":"address","value":null,"visibility":"public"},"children":[{"attributes":{"name":"address","type":"address"},"id":18,"name":"ElementaryTypeName","src":"207:7:0"}],"id":19,"name":"VariableDeclaration","src":"207:24:0"},{"attributes":{"constant":false,"name":"tipToEther","scope":171,"stateVariable":true,"storageLocation":"default","type":"uint256","visibility":"public"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":20,"name":"ElementaryTypeName","src":"238:4:0"},{"attributes":{"argumentTypes":null,"hexvalue":"302e30303031","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":"ether","token":"number","type":"int_const 100000000000000","value":"0.0001"},"id":21,"name":"Literal","src":"263:12:0"}],"id":22,"name":"VariableDeclaration","src":"238:37:0"},{"attributes":{"constant":false,"documentation":null,"implemented":true,"isConstructor":true,"modifiers":[null],"name":"","payable":false,"scope":171,"stateMutability":"nonpayable","superFunction":null,"visibility":"public"},"children":[{"children":[{"attributes":{"constant":false,"name":"_validator","scope":32,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":23,"name":"ElementaryTypeName","src":"295:7:0"}],"id":24,"name":"VariableDeclaration","src":"295:18:0"}],"id":25,"name":"ParameterList","src":"294:20:0"},{"attributes":{"parameters":[null]},"children":[],"id":26,"name":"ParameterList","src":"322:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":19,"type":"address","value":"validator"},"id":27,"name":"Identifier","src":"332:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":24,"type":"address","value":"_validator"},"id":28,"name":"Identifier","src":"344:10:0"}],"id":29,"name":"Assignment","src":"332:22:0"}],"id":30,"name":"ExpressionStatement","src":"332:22:0"}],"id":31,"name":"Block","src":"322:39:0"}],"id":32,"name":"FunctionDefinition","src":"282:79:0"},{"attributes":{"constant":false,"documentation":null,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"","payable":true,"scope":171,"stateMutability":"payable","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":33,"name":"ParameterList","src":"380:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":34,"name":"ParameterList","src":"398:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":13,"type":"function (address,uint256)","value":"Deposit"},"id":35,"name":"Identifier","src":"413:7:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":186,"type":"msg","value":"msg"},"id":36,"name":"Identifier","src":"421:3:0"}],"id":37,"name":"MemberAccess","src":"421:10:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"value","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":186,"type":"msg","value":"msg"},"id":38,"name":"Identifier","src":"433:3:0"}],"id":39,"name":"MemberAccess","src":"433:9:0"}],"id":40,"name":"FunctionCall","src":"413:30:0"}],"id":41,"name":"EmitStatement","src":"408:35:0"}],"id":42,"name":"Block","src":"398:52:0"}],"id":43,"name":"FunctionDefinition","src":"371:79:0"},{"attributes":{"constant":false,"documentation":null,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"withdraw","payable":false,"scope":171,"stateMutability":"nonpayable","superFunction":null,"visibility":"public"},"children":[{"children":[{"attributes":{"constant":false,"name":"_id","scope":120,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":44,"name":"ElementaryTypeName","src":"474:4:0"}],"id":45,"name":"VariableDeclaration","src":"474:8:0"},{"attributes":{"constant":false,"name":"_value","scope":120,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":46,"name":"ElementaryTypeName","src":"484:4:0"}],"id":47,"name":"VariableDeclaration","src":"484:11:0"},{"attributes":{"constant":false,"name":"_sig","scope":120,"stateVariable":false,"storageLocation":"default","type":"bytes","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes","type":"bytes"},"id":48,"name":"ElementaryTypeName","src":"497:5:0"}],"id":49,"name":"VariableDeclaration","src":"497:10:0"}],"id":50,"name":"ParameterList","src":"473:35:0"},{"attributes":{"parameters":[null]},"children":[],"id":51,"name":"ParameterList","src":"516:0:0"},{"children":[{"attributes":{"assignments":[53]},"children":[{"attributes":{"constant":false,"name":"dataHash","scope":120,"stateVariable":false,"storageLocation":"default","type":"bytes32","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes32","type":"bytes32"},"id":52,"name":"ElementaryTypeName","src":"526:7:0"}],"id":53,"name":"VariableDeclaration","src":"526:16:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"bytes32","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":180,"type":"function () pure returns (bytes32)","value":"keccak256"},"id":54,"name":"Identifier","src":"545:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":19,"type":"address","value":"validator"},"id":55,"name":"Identifier","src":"555:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":45,"type":"uint256","value":"_id"},"id":56,"name":"Identifier","src":"566:3:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":47,"type":"uint256","value":"_value"},"id":57,"name":"Identifier","src":"571:6:0"}],"id":58,"name":"FunctionCall","src":"545:33:0"}],"id":59,"name":"VariableDeclarationStatement","src":"526:52:0"},{"attributes":{"assignments":[61]},"children":[{"attributes":{"constant":false,"name":"prefixedHash","scope":120,"stateVariable":false,"storageLocation":"default","type":"bytes32","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes32","type":"bytes32"},"id":60,"name":"ElementaryTypeName","src":"588:7:0"}],"id":61,"name":"VariableDeclaration","src":"588:20:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"bytes32","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_178a2411ab6fbc1ba11064408972259c558d0e82fd48b0aba3ad81d14f065e73","typeString":"literal_string \"\u0019Ethereum Signed Message:\n32\""},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"overloadedDeclarations":[null],"referencedDeclaration":180,"type":"function () pure returns (bytes32)","value":"keccak256"},"id":62,"name":"Identifier","src":"611:9:0"},{"attributes":{"argumentTypes":null,"hexvalue":"19457468657265756d205369676e6564204d6573736167653a0a3332","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"string","type":"literal_string \"\u0019Ethereum Signed Message:\n32\"","value":"\u0019Ethereum Signed Message:\n32"},"id":63,"name":"Literal","src":"621:34:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":53,"type":"bytes32","value":"dataHash"},"id":64,"name":"Identifier","src":"657:8:0"}],"id":65,"name":"FunctionCall","src":"611:55:0"}],"id":66,"name":"VariableDeclarationStatement","src":"588:78:0"},{"attributes":{"assignments":[68]},"children":[{"attributes":{"constant":false,"name":"recovered","scope":120,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":67,"name":"ElementaryTypeName","src":"676:7:0"}],"id":68,"name":"VariableDeclaration","src":"676:17:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"address","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"overloadedDeclarations":[null],"referencedDeclaration":170,"type":"function (bytes memory,bytes32) pure returns (address)","value":"getRecoveredAddress"},"id":69,"name":"Identifier","src":"696:19:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":49,"type":"bytes memory","value":"_sig"},"id":70,"name":"Identifier","src":"716:4:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":61,"type":"bytes32","value":"prefixedHash"},"id":71,"name":"Identifier","src":"722:12:0"}],"id":72,"name":"FunctionCall","src":"696:39:0"}],"id":73,"name":"VariableDeclarationStatement","src":"676:59:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[189,190],"referencedDeclaration":189,"type":"function (bool) pure","value":"require"},"id":74,"name":"Identifier","src":"745:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"==","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":19,"type":"address","value":"validator"},"id":75,"name":"Identifier","src":"753:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":68,"type":"address","value":"recovered"},"id":76,"name":"Identifier","src":"766:9:0"}],"id":77,"name":"BinaryOperation","src":"753:22:0"}],"id":78,"name":"FunctionCall","src":"745:31:0"}],"id":79,"name":"ExpressionStatement","src":"745:31:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[189,190],"referencedDeclaration":189,"type":"function (bool) pure","value":"require"},"id":80,"name":"Identifier","src":"786:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"<","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":17,"type":"mapping(uint256 => uint256)","value":"used"},"id":81,"name":"Identifier","src":"794:4:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":45,"type":"uint256","value":"_id"},"id":82,"name":"Identifier","src":"799:3:0"}],"id":83,"name":"IndexAccess","src":"794:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":47,"type":"uint256","value":"_value"},"id":84,"name":"Identifier","src":"806:6:0"}],"id":85,"name":"BinaryOperation","src":"794:18:0"}],"id":86,"name":"FunctionCall","src":"786:27:0"}],"id":87,"name":"ExpressionStatement","src":"786:27:0"},{"attributes":{"assignments":[89]},"children":[{"attributes":{"constant":false,"name":"_transfer","scope":120,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":88,"name":"ElementaryTypeName","src":"832:4:0"}],"id":89,"name":"VariableDeclaration","src":"832:14:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"*","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"-","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":47,"type":"uint256","value":"_value"},"id":90,"name":"Identifier","src":"850:6:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":17,"type":"mapping(uint256 => uint256)","value":"used"},"id":91,"name":"Identifier","src":"859:4:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":45,"type":"uint256","value":"_id"},"id":92,"name":"Identifier","src":"864:3:0"}],"id":93,"name":"IndexAccess","src":"859:9:0"}],"id":94,"name":"BinaryOperation","src":"850:18:0"}],"id":95,"name":"TupleExpression","src":"849:20:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":22,"type":"uint256","value":"tipToEther"},"id":96,"name":"Identifier","src":"872:10:0"}],"id":97,"name":"BinaryOperation","src":"849:33:0"}],"id":98,"name":"VariableDeclarationStatement","src":"832:50:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":17,"type":"mapping(uint256 => uint256)","value":"used"},"id":99,"name":"Identifier","src":"901:4:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":45,"type":"uint256","value":"_id"},"id":100,"name":"Identifier","src":"906:3:0"}],"id":101,"name":"IndexAccess","src":"901:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":47,"type":"uint256","value":"_value"},"id":102,"name":"Identifier","src":"913:6:0"}],"id":103,"name":"Assignment","src":"901:18:0"}],"id":104,"name":"ExpressionStatement","src":"901:18:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"transfer","referencedDeclaration":null,"type":"function (uint256)"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":186,"type":"msg","value":"msg"},"id":105,"name":"Identifier","src":"929:3:0"}],"id":108,"name":"MemberAccess","src":"929:10:0"}],"id":109,"name":"MemberAccess","src":"929:19:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":89,"type":"uint256","value":"_transfer"},"id":110,"name":"Identifier","src":"949:9:0"}],"id":111,"name":"FunctionCall","src":"929:30:0"}],"id":112,"name":"ExpressionStatement","src":"929:30:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":7,"type":"function (address,uint256)","value":"Withdraw"},"id":113,"name":"Identifier","src":"974:8:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":186,"type":"msg","value":"msg"},"id":114,"name":"Identifier","src":"983:3:0"}],"id":115,"name":"MemberAccess","src":"983:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":89,"type":"uint256","value":"_transfer"},"id":116,"name":"Identifier","src":"995:9:0"}],"id":117,"name":"FunctionCall","src":"974:31:0"}],"id":118,"name":"EmitStatement","src":"969:36:0"}],"id":119,"name":"Block","src":"516:496:0"}],"id":120,"name":"FunctionDefinition","src":"456:556:0"},{"attributes":{"constant":true,"documentation":null,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"getRecoveredAddress","payable":false,"scope":171,"stateMutability":"pure","superFunction":null,"visibility":"internal"},"children":[{"children":[{"attributes":{"constant":false,"name":"sig","scope":170,"stateVariable":false,"storageLocation":"default","type":"bytes","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes","type":"bytes"},"id":121,"name":"ElementaryTypeName","src":"1047:5:0"}],"id":122,"name":"VariableDeclaration","src":"1047:9:0"},{"attributes":{"constant":false,"name":"dataHash","scope":170,"stateVariable":false,"storageLocation":"default","type":"bytes32","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes32","type":"bytes32"},"id":123,"name":"ElementaryTypeName","src":"1058:7:0"}],"id":124,"name":"VariableDeclaration","src":"1058:16:0"}],"id":125,"name":"ParameterList","src":"1046:29:0"},{"children":[{"attributes":{"constant":false,"name":"addr","scope":170,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":126,"name":"ElementaryTypeName","src":"1123:7:0"}],"id":127,"name":"VariableDeclaration","src":"1123:12:0"}],"id":128,"name":"ParameterList","src":"1122:14:0"},{"children":[{"attributes":{"assignments":[null],"initialValue":null},"children":[{"attributes":{"constant":false,"name":"ra","scope":170,"stateVariable":false,"storageLocation":"default","type":"bytes32","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes32","type":"bytes32"},"id":129,"name":"ElementaryTypeName","src":"1151:7:0"}],"id":130,"name":"VariableDeclaration","src":"1151:10:0"}],"id":131,"name":"VariableDeclarationStatement","src":"1151:10:0"},{"attributes":{"assignments":[null],"initialValue":null},"children":[{"attributes":{"constant":false,"name":"sa","scope":170,"stateVariable":false,"storageLocation":"default","type":"bytes32","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"bytes32","type":"bytes32"},"id":132,"name":"ElementaryTypeName","src":"1171:7:0"}],"id":133,"name":"VariableDeclaration","src":"1171:10:0"}],"id":134,"name":"VariableDeclarationStatement","src":"1171:10:0"},{"attributes":{"assignments":[null],"initialValue":null},"children":[{"attributes":{"constant":false,"name":"va","scope":170,"stateVariable":false,"storageLocation":"default","type":"uint8","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint8","type":"uint8"},"id":135,"name":"ElementaryTypeName","src":"1191:5:0"}],"id":136,"name":"VariableDeclaration","src":"1191:8:0"}],"id":137,"name":"VariableDeclarationStatement","src":"1191:8:0"},{"attributes":{"falseBody":null},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"!=","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"length","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":122,"type":"bytes memory","value":"sig"},"id":138,"name":"Identifier","src":"1252:3:0"}],"id":139,"name":"MemberAccess","src":"1252:10:0"},{"attributes":{"argumentTypes":null,"hexvalue":"3635","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const 65","value":"65"},"id":140,"name":"Literal","src":"1266:2:0"}],"id":141,"name":"BinaryOperation","src":"1252:16:0"},{"children":[{"attributes":{"functionReturnParameters":128},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"type":"int_const 0"},"children":[{"attributes":{"argumentTypes":null,"hexvalue":"30","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const 0","value":"0"},"id":142,"name":"Literal","src":"1290:1:0"}],"id":143,"name":"TupleExpression","src":"1289:3:0"}],"id":144,"name":"Return","src":"1282:10:0"}],"id":145,"name":"Block","src":"1270:33:0"}],"id":146,"name":"IfStatement","src":"1248:55:0"},{"attributes":{"externalReferences":[{"ra":{"declaration":130,"isOffset":false,"isSlot":false,"src":"1390:2:0","valueSize":1}},{"va":{"declaration":136,"isOffset":false,"isSlot":false,"src":"1462:2:0","valueSize":1}},{"sig":{"declaration":122,"isOffset":false,"isSlot":false,"src":"1406:3:0","valueSize":1}},{"sa":{"declaration":133,"isOffset":false,"isSlot":false,"src":"1426:2:0","valueSize":1}},{"sig":{"declaration":122,"isOffset":false,"isSlot":false,"src":"1442:3:0","valueSize":1}},{"sig":{"declaration":122,"isOffset":false,"isSlot":false,"src":"1486:3:0","valueSize":1}}],"operations":"{\n    ra := mload(add(sig, 32))\n    sa := mload(add(sig, 64))\n    va := byte(0, mload(add(sig, 96)))\n}"},"children":[],"id":147,"name":"InlineAssembly","src":"1369:149:0"},{"attributes":{"falseBody":null},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"<","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":136,"type":"uint8","value":"va"},"id":148,"name":"Identifier","src":"1520:2:0"},{"attributes":{"argumentTypes":null,"hexvalue":"3237","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const 27","value":"27"},"id":149,"name":"Literal","src":"1525:2:0"}],"id":150,"name":"BinaryOperation","src":"1520:7:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"+=","type":"uint8"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":136,"type":"uint8","value":"va"},"id":151,"name":"Identifier","src":"1541:2:0"},{"attributes":{"argumentTypes":null,"hexvalue":"3237","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const 27","value":"27"},"id":152,"name":"Literal","src":"1547:2:0"}],"id":153,"name":"Assignment","src":"1541:8:0"}],"id":154,"name":"ExpressionStatement","src":"1541:8:0"}],"id":155,"name":"Block","src":"1529:31:0"}],"id":156,"name":"IfStatement","src":"1516:44:0"},{"attributes":{"assignments":[158]},"children":[{"attributes":{"constant":false,"name":"recoveredAddress","scope":170,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":157,"name":"ElementaryTypeName","src":"1570:7:0"}],"id":158,"name":"VariableDeclaration","src":"1570:24:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"address","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_uint8","typeString":"uint8"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"overloadedDeclarations":[null],"referencedDeclaration":178,"type":"function (bytes32,uint8,bytes32,bytes32) pure returns (address)","value":"ecrecover"},"id":159,"name":"Identifier","src":"1597:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":124,"type":"bytes32","value":"dataHash"},"id":160,"name":"Identifier","src":"1607:8:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":136,"type":"uint8","value":"va"},"id":161,"name":"Identifier","src":"1617:2:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":130,"type":"bytes32","value":"ra"},"id":162,"name":"Identifier","src":"1621:2:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":133,"type":"bytes32","value":"sa"},"id":163,"name":"Identifier","src":"1625:2:0"}],"id":164,"name":"FunctionCall","src":"1597:31:0"}],"id":165,"name":"VariableDeclarationStatement","src":"1570:58:0"},{"attributes":{"functionReturnParameters":128},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":158,"type":"address","value":"recoveredAddress"},"id":166,"name":"Identifier","src":"1647:16:0"}],"id":167,"name":"TupleExpression","src":"1646:18:0"}],"id":168,"name":"Return","src":"1639:25:0"}],"id":169,"name":"Block","src":"1141:530:0"}],"id":170,"name":"FunctionDefinition","src":"1018:653:0"}],"id":171,"name":"ContractDefinition","src":"26:1653:0"}],"id":172,"name":"SourceUnit","src":"0:1679:0"}}